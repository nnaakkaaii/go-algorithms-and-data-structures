# ヒープ

データ構造には、データを「追加する」「取り出す」などの操作と、取り出すときのルールがあった。(LIFO, FIFOなど)

一方で、データの到着順ではなくデータが持つあるキーを基準にして優先度が高いものから取り出す優先度付きキューでは、高等的なアルゴリズムの実装において重要な役割を果たす

優先度付きキューは二分探索木を応用して実現することができるが、バランスの良い木を保ちながら効率的な操作を行うには工夫が必要。

一方で、二分ヒープと呼ばれるデータ構造を用いることで、優先度付きキューを実装することができる。

## 完全二分木

全ての葉が同じ深さをもち、全ての内部節点の子の数が2であるような二分木を完全二分木と呼ぶ。

最下位レベルの葉が左から順に埋まっているような木もおおよそ完全二分木と呼ぶ。

## 二分ヒープ

二分ヒープは木の各節点に割り当てられたキーが1つの配列の各要素に対応した完全二分木で表されたデータ構造

![二分ヒープ](https://miro.medium.com/max/668/1*ds0JXOw3lLqNo6hw__NtZw.png)

二分ヒープは論理的な構造は完全二分木であるが、1オリジンの1次元配列を用いて表す。

(i.e. 二分ヒープを表す配列A, 二分ヒープの要素数をHとすれば、`A[1...H]`に二分ヒープの要素が格納される。)

さらに、ある節点のインデックスをiとした時、親は`Math.Floor(i / 2)`、左の子は`2 * i`、右の子は`2 * i + 1`として算出される。

### 二分ヒープの条件

max-ヒープ条件とmin-ヒープ条件がある。

max-ヒープ条件では節点のキーがその親のキー以上になるようにキーを格納していく。

最大の要素が根に格納され、親子間には大小関係があり、兄弟間には制約がないことに注意。

大小関係を保ちつつ優先度が最も高い要素の取り出しと新しい要素の追加を効率的に行うことができる点が特徴。


